<!DOCTYPE html>
<!-- saved from url=(0059)https://www.cs.yale.edu/homes/aspnes/classes/223/notes.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="James Aspnes">
  <title>Generated Excerpt</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">
html {
font-size: 100%;
overflow-y: scroll;
-webkit-text-size-adjust: 100%;
-ms-text-size-adjust: 100%;
}
body {
color: #444;
font-family: Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif;
font-size: 12px;
line-height: 1.4;
padding: 1em;
margin: auto;
max-width: 44em;
background: #fefefe;
}
a {
color: #0645ad;
text-decoration: none;
}
a:visited {
color: #0b0080;
}
a:hover {
color: #06e;
}
a:active {
color: #faa700;
}
a:focus {
outline: thin dotted;
}
*::-moz-selection {
background: rgba(255, 255, 0, 0.3);
color: #000;
}
*::selection {
background: rgba(255, 255, 0, 0.3);
color: #000;
}
a::-moz-selection {
background: rgba(255, 255, 0, 0.3);
color: #0645ad;
}
a::selection {
background: rgba(255, 255, 0, 0.3);
color: #0645ad;
}
p {
margin: 1em 0;
}
img {
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
color: #111;
line-height: 125%;
margin-top: 2em;
font-weight: normal;
}
h4, h5, h6 {
font-weight: bold;
}
h1 {
font-size: 2.5em;
}
h2 {
font-size: 2em;
}
h3 {
font-size: 1.5em;
}
h4 {
font-size: 1.2em;
}
h5 {
font-size: 1em;
}
h6 {
font-size: 0.9em;
}
blockquote {
color: #666666;
margin: 0;
padding-left: 3em;
border-left: 0.5em #EEE solid;
}
hr {
display: block;
height: 2px;
border: 0;
border-top: 1px solid #aaa;
border-bottom: 1px solid #eee;
margin: 1em 0;
padding: 0;
}
pre, code, kbd, samp {
color: #000;
font-family: monospace, monospace;
_font-family: 'courier new', monospace;
font-size: 0.98em;
}
pre {
white-space: pre;
white-space: pre-wrap;
word-wrap: break-word;
}
b, strong {
font-weight: bold;
}
dfn {
font-style: italic;
}
ins {
background: #ff9;
color: #000;
text-decoration: none;
}
mark {
background: #ff0;
color: #000;
font-style: italic;
font-weight: bold;
}
sub, sup {
font-size: 75%;
line-height: 0;
position: relative;
vertical-align: baseline;
}
sup {
top: -0.5em;
}
sub {
bottom: -0.25em;
}
ul, ol {
margin: 1em 0;
padding: 0 0 0 2em;
}
li p:last-child {
margin-bottom: 0;
}
ul ul, ol ol {
margin: .3em 0;
}
dl {
margin-bottom: 1em;
}
dt {
font-weight: bold;
margin-bottom: .8em;
}
dd {
margin: 0 0 .8em 2em;
}
dd:last-child {
margin-bottom: 0;
}
img {
border: 0;
-ms-interpolation-mode: bicubic;
vertical-align: middle;
}
figure {
display: block;
text-align: center;
margin: 1em 0;
}
figure img {
border: none;
margin: 0 auto;
}
figcaption {
font-size: 0.8em;
font-style: italic;
margin: 0 0 .8em;
}
table {
margin-bottom: 2em;
border-bottom: 1px solid #ddd;
border-right: 1px solid #ddd;
border-spacing: 0;
border-collapse: collapse;
}
table th {
padding: .2em 1em;
background-color: #eee;
border-top: 1px solid #ddd;
border-left: 1px solid #ddd;
}
table td {
padding: .2em 1em;
border-top: 1px solid #ddd;
border-left: 1px solid #ddd;
vertical-align: top;
}
.author {
font-size: 1.2em;
text-align: center;
}
@media only screen and (min-width: 480px) {
body {
font-size: 14px;
}
}
@media only screen and (min-width: 768px) {
body {
font-size: 16px;
}
}
@media print {
* {
background: transparent !important;
color: black !important;
filter: none !important;
-ms-filter: none !important;
}
body {
font-size: 12pt;
max-width: 100%;
}
a, a:visited {
text-decoration: underline;
}
hr {
height: 1px;
border: 0;
border-bottom: 1px solid black;
}
a[href]:after {
content: " (" attr(href) ")";
}
abbr[title]:after {
content: " (" attr(title) ")";
}
.ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
content: "";
}
pre, blockquote {
border: 1px solid #999;
padding-right: 1em;
page-break-inside: avoid;
}
tr, img {
page-break-inside: avoid;
}
img {
max-width: 100% !important;
}
@page :left {
margin: 15mm 20mm 15mm 10mm;
}
@page :right {
margin: 15mm 10mm 15mm 20mm;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3 {
page-break-after: avoid;
}
}
</style>
<h2 id="hw6-2021"><span class="header-section-number">8.6</span> Assignment 6, due 2021-03-26 at 17:00 Eastern US time</h2>
<p>For this assignment, you are to implement a data structure that represents a editable buffer in a text editor. The contents of the buffer, conceptually, are a string of zero or more non-null characters, followed by a null, although the actual representation might be different. When the buffer is created, the user specifies that it should have zero or more cursors, indexes into the buffer that can be used as locations to insert new characters. Inserting a character does not change what character each cursor points to, but functions are provided to move cursors forward or backward within the buffer.</p>
<p>For example, in the picture below, the bottom line represents the text in the buffer while the numbers on the top line represent the location of three cursors numbered 0, 1, and 2:</p>
<pre><code>  0  2  1
abcdefghij</code></pre>
<p>If we insert an <code>X</code> before cursor 2, the new state will look like this:</p>
<pre><code>  0   2  1
abcdeXfghij</code></pre>
<p>We can now call a function to move cursor 2 back one position, to put it on the <code>X</code>:</p>
<pre><code>  0  2   1
abcdeXfghij</code></pre>
<p>If we now insert a <code>Y</code> before cursor 0, we get this:</p>
<pre><code>   0  2   1
abYcdeXfghij</code></pre>
<p>By continuing to insert new characters, and possibly moving the cursors around, we can generate a string of arbitrary length. This string can then be extracted as a standard C string in a mallocâ€™d block using an accessor function.</p>
<p>The full interface is given in the file <code>/c/cs223/Hwk6/buffer.h</code>, reproduced below.</p>
<div>
<div class="sourceCode" id="cb540"><pre class="sourceCode c"><code class="sourceCode c"><a class="sourceLine" id="cb540-1" title="1"><span class="co">// Abstract data type for an editable string buffer.</span></a>
<a class="sourceLine" id="cb540-2" title="2"><span class="co">//</span></a>
<a class="sourceLine" id="cb540-3" title="3"><span class="co">// A buffer is a sequence of zero or more non-null characters</span></a>
<a class="sourceLine" id="cb540-4" title="4"><span class="co">// followed by a null.</span></a>
<a class="sourceLine" id="cb540-5" title="5"><span class="co">//</span></a>
<a class="sourceLine" id="cb540-6" title="6"><span class="co">// It also tracks n cursor positions, each of which is a pointer</span></a>
<a class="sourceLine" id="cb540-7" title="7"><span class="co">// to some character.</span></a>
<a class="sourceLine" id="cb540-8" title="8"><span class="co">//</span></a>
<a class="sourceLine" id="cb540-9" title="9"><span class="co">// Initially, the buffer is empty, and all cursors point to the null.</span></a>
<a class="sourceLine" id="cb540-10" title="10"><span class="co">//</span></a>
<a class="sourceLine" id="cb540-11" title="11"><span class="co">// For the functions bufferInsert, bufferCursorForward,</span></a>
<a class="sourceLine" id="cb540-12" title="12"><span class="co">// and BufferCursorBack, specifying a cursor index that is</span></a>
<a class="sourceLine" id="cb540-13" title="13"><span class="co">// too large results in the function having no effect.</span></a>
<a class="sourceLine" id="cb540-14" title="14"></a>
<a class="sourceLine" id="cb540-15" title="15"><span class="kw">typedef</span> <span class="kw">struct</span> buffer *Buffer;</a>
<a class="sourceLine" id="cb540-16" title="16"></a>
<a class="sourceLine" id="cb540-17" title="17"><span class="co">// Make a buffer with n cursors.</span></a>
<a class="sourceLine" id="cb540-18" title="18">Buffer bufferCreate(<span class="dt">size_t</span> n);</a>
<a class="sourceLine" id="cb540-19" title="19"></a>
<a class="sourceLine" id="cb540-20" title="20"><span class="co">// Free all space used by a buffer.</span></a>
<a class="sourceLine" id="cb540-21" title="21"><span class="dt">void</span> bufferDestroy(Buffer b);</a>
<a class="sourceLine" id="cb540-22" title="22"></a>
<a class="sourceLine" id="cb540-23" title="23"><span class="co">// Insert a new non-null character before the i-th cursor position.</span></a>
<a class="sourceLine" id="cb540-24" title="24"><span class="co">// All cursors continue to point to the same character</span></a>
<a class="sourceLine" id="cb540-25" title="25"><span class="co">// they pointed to before.</span></a>
<a class="sourceLine" id="cb540-26" title="26"><span class="co">// If i is out of range or c is '\0', has no effect.</span></a>
<a class="sourceLine" id="cb540-27" title="27"><span class="dt">void</span> bufferInsert(Buffer b, <span class="dt">size_t</span> i, <span class="dt">char</span> c);</a>
<a class="sourceLine" id="cb540-28" title="28"></a>
<a class="sourceLine" id="cb540-29" title="29"><span class="co">// Advance cursor i one position.</span></a>
<a class="sourceLine" id="cb540-30" title="30"><span class="co">// If i is out of range, or the i-th cursor</span></a>
<a class="sourceLine" id="cb540-31" title="31"><span class="co">// already points to the final '\0',</span></a>
<a class="sourceLine" id="cb540-32" title="32"><span class="co">// has no effect.</span></a>
<a class="sourceLine" id="cb540-33" title="33"><span class="dt">void</span> bufferCursorForward(Buffer b, <span class="dt">size_t</span> i);</a>
<a class="sourceLine" id="cb540-34" title="34"></a>
<a class="sourceLine" id="cb540-35" title="35"><span class="co">// Move cursor i back one position.</span></a>
<a class="sourceLine" id="cb540-36" title="36"><span class="co">// If i is out of range, or the i-th cursor</span></a>
<a class="sourceLine" id="cb540-37" title="37"><span class="co">// already points to the first character,</span></a>
<a class="sourceLine" id="cb540-38" title="38"><span class="co">// has no effect.</span></a>
<a class="sourceLine" id="cb540-39" title="39"><span class="dt">void</span> bufferCursorBack(Buffer b, <span class="dt">size_t</span> i);</a>
<a class="sourceLine" id="cb540-40" title="40"></a>
<a class="sourceLine" id="cb540-41" title="41"><span class="co">// Return the number of cursors in a buffer</span></a>
<a class="sourceLine" id="cb540-42" title="42"><span class="dt">size_t</span> bufferCursors(Buffer b);</a>
<a class="sourceLine" id="cb540-43" title="43"></a>
<a class="sourceLine" id="cb540-44" title="44"><span class="co">// Return the number of characters in a buffer,</span></a>
<a class="sourceLine" id="cb540-45" title="45"><span class="co">// not including the final null.</span></a>
<a class="sourceLine" id="cb540-46" title="46"><span class="dt">size_t</span> bufferSize(Buffer b);</a>
<a class="sourceLine" id="cb540-47" title="47"></a>
<a class="sourceLine" id="cb540-48" title="48"><span class="co">// Return the characters in a buffer</span></a>
<a class="sourceLine" id="cb540-49" title="49"><span class="co">// as a null-terminated sequence of chars.</span></a>
<a class="sourceLine" id="cb540-50" title="50"><span class="co">// Return value is malloc'd and should be freed by caller.</span></a>
<a class="sourceLine" id="cb540-51" title="51"><span class="dt">char</span> *bufferContents(Buffer b);</a></code></pre></div>
<a href="https://www.cs.yale.edu/homes/aspnes/classes/223/examples/2021/hw/6/buffer.h">examples/2021/hw/6/buffer.h</a>
</div>
<p>The same directory also includes a sample <a href="https://www.cs.yale.edu/homes/aspnes/classes/223/examples/2021/hw/6/Makefile">Makefile</a>; a <a href="https://www.cs.yale.edu/homes/aspnes/classes/223/examples/2021/hw/6/editor.c">main program</a> for a simple text editor that compiles against an implementation of the buffer data type in a file <code>buffer.c</code> that you are asked to provide; and a <a href="https://www.cs.yale.edu/homes/aspnes/classes/223/examples/2021/hw/6/randomizer.c">fuzz tester</a> that generates consistent pseudorandom input for the editor.</p>
<h3 id="testing-your-assignment-4"><span class="header-section-number">8.6.1</span> Testing your assignment</h3>
<p>Some sample inputs and outputs for the editor are provided in the directory <code>/c/cs223/Hwk6/testFiles</code>. The number at the start of each input file name specifies what argument to give to <code>editor</code> to get the corresponding output. The public test script <code>/c/cs223/Hwk6/test.public</code> will run these tests (and a few valgrind tests) on the <code>buffer.c</code> file in your current directory. You can also use <code>/c/cs223/Hwk6/testit 6 public</code> to run this script on your submitted file.</p>
<h3 id="submitting-your-assignment-5"><span class="header-section-number">8.6.2</span> Submitting your assignment</h3>
<p>Submit your file <code>buffer.c</code> as usual with <code>/c/cs223/bin/submit 6 buffer.c</code>. You do not need to submit any other files.</p>
